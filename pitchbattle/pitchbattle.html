<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° PITCH BATTLE - Celucenter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: white;
            overflow-x: hidden;
        }

        .contenedor {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 0.8s ease-out;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .title {
            font-size: 3.5em;
            font-weight: 900;
            background: linear-gradient(135deg, #FF6B35, #F7931E, #FDB833);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3em;
            color: #aaa;
            margin-bottom: 20px;
        }

        .cronograma {
            background: rgba(255, 107, 53, 0.1);
            border: 2px solid #FF6B35;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .cronograma-item {
            display: inline-block;
            margin: 0 20px;
            color: #FDB833;
            font-weight: 700;
            font-size: 1.1em;
        }

        .controles {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.6);
        }

        .btn-secondary {
            background: #444;
            color: white;
        }

        .btn-secondary:hover {
            background: #555;
        }

        .btn-danger {
            background: #d32f2f;
            color: white;
        }

        .btn-danger:hover {
            background: #b71c1c;
        }

        select.btn {
            padding: 10px 15px;
            font-size: 0.95em;
            cursor: pointer;
            background: #444;
            color: white;
        }

        .main-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .main-area {
                grid-template-columns: 1fr;
            }
        }

        .equipo-actual {
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(247, 147, 30, 0.1));
            border: 3px solid #FF6B35;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }

        .equipo-actual h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #FDB833;
        }

        .nombre-equipo {
            font-size: 2.2em;
            font-weight: 900;
            color: #FF6B35;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .integrantes {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .integrantes-label {
            color: #FDB833;
            font-weight: 700;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .producto-actual {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .label-producto {
            color: #FDB833;
            font-size: 0.9em;
            text-transform: uppercase;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .producto-nombre {
            font-size: 1.8em;
            font-weight: bold;
            color: white;
        }

        .descripcion-producto {
            font-size: 0.85em;
            color: #ccc;
            margin-top: 10px;
            line-height: 1.5;
            white-space: pre-line;
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #FDB833;
            max-height: 400px;
            overflow-y: auto;
        }

        .timer-section {
            background: linear-gradient(135deg, rgba(50, 50, 50, 0.8), rgba(30, 30, 30, 0.8));
            border: 3px solid #FFD700;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .timer-label {
            font-size: 0.9em;
            color: #FFD700;
            text-transform: uppercase;
            margin-bottom: 15px;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .timer-display {
            font-size: 5em;
            font-weight: 900;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .timer-display.warning {
            color: #FF6B35;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .timer-info {
            font-size: 0.9em;
            color: #FFD700;
            margin-top: 15px;
            text-align: center;
        }

        .ranking-section {
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid #FFD700;
        }

        .ranking-section h3 {
            color: #FDB833;
            margin-bottom: 25px;
            text-transform: uppercase;
            font-size: 1.3em;
        }

        .ranking-list {
            list-style: none;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            margin-bottom: 12px;
            border-radius: 10px;
            border-left: 5px solid #FFD700;
            animation: slideIn 0.5s ease-out forwards;
            opacity: 0;
        }

        @keyframes slideIn {
            to { opacity: 1; }
        }

        .ranking-item:nth-child(1) {
            border-left-color: #FFD700;
            background: rgba(255, 215, 0, 0.1);
            animation-delay: 0s;
        }

        .ranking-item:nth-child(2) {
            border-left-color: #C0C0C0;
            animation-delay: 0.1s;
        }

        .ranking-item:nth-child(3) {
            border-left-color: #CD7F32;
            animation-delay: 0.2s;
        }

        .ranking-item:nth-child(n+4) {
            animation-delay: 0.3s;
        }

        .posicion {
            font-size: 2em;
            font-weight: 900;
            margin-right: 20px;
            min-width: 50px;
        }

        .posicion.oro { color: #FFD700; }
        .posicion.plata { color: #C0C0C0; }
        .posicion.bronce { color: #CD7F32; }

        .ranking-nombre {
            flex: 1;
            font-size: 1.2em;
            font-weight: 700;
        }

        .ranking-puntaje {
            font-size: 1.5em;
            font-weight: 900;
            color: #FDB833;
        }

        .ranking-detalles {
            flex: 0.5;
            font-size: 0.85em;
            color: #aaa;
        }

        .ranking-jurados {
            display: block;
            color: #ccc;
        }

        .productos-section {
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
        }

        .productos-section h3 {
            color: #4CAF50;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
        }

        .producto-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #444;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 5px solid #FFD700;
        }

        .producto-card:hover {
            border-color: #FF6B35;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.3);
        }

        .producto-card h4 {
            color: #FDB833;
            margin-bottom: 8px;
        }

        .producto-card p {
            font-size: 0.85em;
            color: #aaa;
            line-height: 1.5;
            max-height: 120px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="contenedor">
        <div class="header">
            <div class="title">‚ö° PITCH BATTLE</div>
            <p class="subtitle">Sistema de Puntuaci√≥n en Vivo - Celucenter</p>
        </div>

        <div class="controles">
            <button class="btn btn-primary" onclick="randomizarEquipos()" style="background: #9C27B0;">üîÄ RANDOM EQUIPOS/PRODUCTOS</button>
        </div>

        <div class="cronograma">
            <div class="cronograma-item">üìã PREPARACI√ìN: 10 min</div>
            <div class="cronograma-item">|</div>
            <div class="cronograma-item">üé§ PRESENTACI√ìN (c/equipo): 5 min</div>
            <div class="cronograma-item">|</div>
            <div class="cronograma-item">üèÜ TOTAL: 40 min</div>
        </div>

        <div class="controles">
            <button class="btn btn-primary" onclick="iniciarTiempo()">‚ñ∂ INICIAR TIEMPO</button>
            <button class="btn btn-secondary" onclick="pausarTiempo()">‚è∏ PAUSAR</button>
            <button class="btn btn-danger" onclick="resetearTiempo()">üîÑ RESET</button>
            <select class="btn" id="seleccionEquipo" onchange="cambiarEquipo()">
                <option value="">-- SELECCIONAR EQUIPO --</option>
            </select>
        </div>

        <div class="main-area">
            <div class="equipo-actual">
                <h2>EQUIPO ACTUAL</h2>
                <div class="nombre-equipo" id="nombreEquipo">---</div>
                <div class="integrantes">
                    <div class="integrantes-label">Integrantes (10)</div>
                    <div id="integrantesCount">10 personas</div>
                </div>
                <div class="producto-actual">
                    <div class="label-producto">Producto Asignado</div>
                    <div class="producto-nombre" id="productoActual">---</div>
                    <div class="descripcion-producto" id="descripcionProducto">---</div>
                </div>
            </div>

            <div class="timer-section">
                <div class="timer-label">TIEMPO DE PRESENTACI√ìN</div>
                <div class="timer-display" id="timerDisplay">5:00</div>
                <div class="timer-controls">
                    <button class="btn btn-secondary" onclick="decrementarTiempo()">-5s</button>
                    <button class="btn btn-secondary" onclick="incrementarTiempo()">+5s</button>
                </div>
                <div class="timer-info">M√°ximo: 5 minutos por equipo</div>
            </div>
        </div>

        <div class="ranking-section">
            <h3>üèÜ RANKING EN VIVO</h3>
            <ul class="ranking-list" id="rankingList"></ul>
        </div>

        <div class="productos-section">
            <h3>üì¶ Productos Disponibles</h3>
            <div class="productos-grid" id="productosGrid"></div>
        </div>
    </div>

    <script>
        const productos = [
            { id: 1, nombre: "SmartBand 10X", desc: "üìù DESCRIPCI√ìN: Pulsera inteligente que mide productividad laboral\nüí∞ PRECIO: $299 USD\nüë• P√öBLICO: Ejecutivos, Emprendedores, Profesionales\n\nüí° PUNTOS CLAVE: +40% productividad, Sincronizaci√≥n completa, Reportes autom√°ticos, 7 d√≠as sin carga\n‚ö†Ô∏è OBJECIONES: ¬øCaro? ROI 3 meses | ¬øDatos? Privado GDPR | ¬øCompatible? iOS/Android\nüìä CASO √âXITO: Vendedor increment√≥ ventas 35% en 2 meses" },
            { id: 2, nombre: "CloudPhone Pro", desc: "üìù DESCRIPCI√ìN: Tel√©fono 100% en la nube, sin bater√≠a f√≠sica\nüí∞ PRECIO: $599 USD\nüë• P√öBLICO: Profesionales m√≥viles, Viajeros frecuentes, Equipos remotos\n\nüí° PUNTOS CLAVE: Bater√≠a infinita, Acceso remoto total, Encriptaci√≥n 256-bit, Soporte 24/7\n‚ö†Ô∏è OBJECIONES: ¬øSin internet? Modo offline | ¬øSeguro? Backup autom√°tico | ¬øMi n√∫mero? Portabilidad gratis\nüìä CASO √âXITO: Ejecutivos Google/Apple lo usan, 15 horas semanales ahorradas" },
            { id: 3, nombre: "MegaTablet Infinity", desc: "üìù DESCRIPCI√ìN: Tablet 15 pulgadas que se pliega como papel\nüí∞ PRECIO: $799 USD\nüë• P√öBLICO: Creativos, Dise√±adores, Productores de contenido, Estudiantes\n\nüí° PUNTOS CLAVE: Pantalla sin l√≠nea visible, Port√°til tama√±o cuaderno, Stylus 10k niveles, 15h bater√≠a\n‚ö†Ô∏è OBJECIONES: ¬øSe da√±a pliegue? 100k tests garantizado | ¬øCara? Reemplaza 3 dispositivos | ¬øVideos? 4K sin lag\nüìä CASO √âXITO: Dise√±adores ahorran 2h/d√≠a, Estudiantes ganaron 5 premios internacionales" },
            { id: 4, nombre: "VentaBoost AI", desc: "üìù DESCRIPCI√ìN: App con IA que predice objeciones en tiempo real\nüí∞ PRECIO: $199/mes o $1,990/a√±o\nüë• P√öBLICO: Equipos de ventas, Call centers, Emprendedores B2B\n\nüí° PUNTOS CLAVE: 87% precisi√≥n en predicci√≥n, Respuestas en tiempo real, An√°lisis de sentimiento, Reportes autom√°ticos\n‚ö†Ô∏è OBJECIONES: ¬øTodas industrias? Se adapta | ¬øDif√≠cil? 5 min capacitaci√≥n | ¬øROI? +45% cierre, se paga 1 mes\nüìä CASO √âXITO: Vendedor pas√≥ de 50% a 72% cierre, Aseguradora gan√≥ $500k anuales" },
            { id: 5, nombre: "SuperAudifonos X", desc: "üìù DESCRIPCI√ìN: Aud√≠fonos traducen 120+ idiomas en tiempo real\nüí∞ PRECIO: $399 USD\nüë• P√öBLICO: Viajeros internacionales, Equipos globales, Negocios B2B\n\nüí° PUNTOS CLAVE: Traducci√≥n 120+ idiomas sin lag, Audio Hi-Fi cancelaci√≥n ruido, 12h bater√≠a, Voz y escritura\n‚ö†Ô∏è OBJECIONES: ¬øPrecisi√≥n? 99.2% certificada | ¬øOffline? Idiomas principales | ¬øSuscripci√≥n? Compra √∫nica, actualizaciones gratis\nüìä CASO √âXITO: Telecom cerr√≥ contratos 8 pa√≠ses nuevos, N√≥mada viaja 30 pa√≠ses diariamente" }
        ];

        let equipos = [
            { id: 1, nombre: "Los Titanes", productoId: 1, integrantes: 10 },
            { id: 2, nombre: "Vendedores Imparables", productoId: 2, integrantes: 10 },
            { id: 3, nombre: "Guerreros 10X", productoId: 3, integrantes: 10 },
            { id: 4, nombre: "Dinast√≠a de Ventas", productoId: 4, integrantes: 10 },
            { id: 5, nombre: "El Equipo Dorado", productoId: 5, integrantes: 10 }
        ];

        let puntuaciones = {};
        let equipoActual = null;
        let tiempoRestante = 300;
        let tiempoActivo = false;
        let intervalo = null;

        function inicializar() {
            equipos.forEach(eq => puntuaciones[eq.id] = 0);
            cargarSelectEquipos();
            mostrarProductos();
            actualizarRanking();
        }

        function cargarSelectEquipos() {
            const select = document.getElementById('seleccionEquipo');
            select.innerHTML = '<option value="">-- SELECCIONAR EQUIPO --</option>';
            equipos.forEach(eq => {
                const option = document.createElement('option');
                option.value = eq.id;
                option.textContent = eq.nombre;
                select.appendChild(option);
            });
        }

        function cambiarEquipo() {
            const id = document.getElementById('seleccionEquipo').value;
            if (!id) return;
            
            equipoActual = equipos.find(e => e.id == id);
            const producto = productos.find(p => p.id == equipoActual.productoId);
            
            document.getElementById('nombreEquipo').textContent = equipoActual.nombre.toUpperCase();
            document.getElementById('integrantesCount').textContent = equipoActual.integrantes + ' personas';
            document.getElementById('productoActual').textContent = producto.nombre;
            document.getElementById('descripcionProducto').textContent = producto.desc;
            
            resetearTiempo();
        }

        function iniciarTiempo() {
            if (tiempoActivo) return;
            tiempoActivo = true;
            intervalo = setInterval(() => {
                tiempoRestante--;
                actualizarDisplay();
                if (tiempoRestante <= 0) {
                    clearInterval(intervalo);
                    tiempoActivo = false;
                    alert('¬°TIEMPO FINALIZADO! üéØ');
                }
            }, 1000);
        }

        function pausarTiempo() {
            tiempoActivo = false;
            clearInterval(intervalo);
        }

        function resetearTiempo() {
            pausarTiempo();
            tiempoRestante = 300;
            actualizarDisplay();
        }

        function decrementarTiempo() {
            tiempoRestante = Math.max(0, tiempoRestante - 5);
            actualizarDisplay();
        }

        function incrementarTiempo() {
            tiempoRestante += 5;
            actualizarDisplay();
        }

        function actualizarDisplay() {
            const min = Math.floor(tiempoRestante / 60);
            const seg = tiempoRestante % 60;
            const display = document.getElementById('timerDisplay');
            display.textContent = `${min}:${seg.toString().padStart(2, '0')}`;
            
            if (tiempoRestante <= 30) {
                display.classList.add('warning');
            } else {
                display.classList.remove('warning');
            }
        }

        function actualizarRanking() {
            const sheetId = '1XbOAGQd8RLfR4EIWavqKDSV7G-Z6Zc1v4cuXmYnSmZM';
            const gid = '0';
            const url = `https://docs.google.com/spreadsheets/d/${sheetId}/export?format=csv&gid=${gid}`;
            
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    const lineas = data.split('\n');
                    const ranking = [];
                    
                    for (let i = 1; i < lineas.length; i++) {
                        if (lineas[i].trim() === '') continue;
                        
                        const columnas = lineas[i].split(',');
                        const equipo = columnas[0].trim();
                        const jurado1 = parseFloat(columnas[1]) || 0;
                        const jurado2 = parseFloat(columnas[2]) || 0;
                        const jurado3 = parseFloat(columnas[3]) || 0;
                        
                        let promedio = 0;
                        let contadores = 0;
                        
                        if (jurado1 > 0) { promedio += jurado1; contadores++; }
                        if (jurado2 > 0) { promedio += jurado2; contadores++; }
                        if (jurado3 > 0) { promedio += jurado3; contadores++; }
                        
                        if (contadores > 0) {
                            promedio = (promedio / contadores).toFixed(1);
                        }
                        
                        if (equipo && promedio > 0) {
                            ranking.push({
                                nombre: equipo,
                                puntaje: promedio,
                                jurado1: jurado1 || '-',
                                jurado2: jurado2 || '-',
                                jurado3: jurado3 || '-'
                            });
                        }
                    }
                    
                    ranking.sort((a, b) => b.puntaje - a.puntaje);
                    
                    const html = ranking.map((item, idx) => {
                        let medallaPosicion = '';
                        if (idx === 0) medallaPosicion = 'ü•á';
                        else if (idx === 1) medallaPosicion = 'ü•à';
                        else if (idx === 2) medallaPosicion = 'ü•â';

                        const clasePos = idx === 0 ? 'oro' : idx === 1 ? 'plata' : idx === 2 ? 'bronce' : '';

                        return `
                            <li class="ranking-item">
                                <div class="posicion ${clasePos}">${medallaPosicion} ${idx + 1}</div>
                                <div class="ranking-nombre">${item.nombre}</div>
                                <div class="ranking-detalles">
                                    <span class="ranking-jurados">J1: ${item.jurado1} | J2: ${item.jurado2} | J3: ${item.jurado3}</span>
                                </div>
                                <div class="ranking-puntaje">${item.puntaje}</div>
                            </li>
                        `;
                    }).join('');

                    document.getElementById('rankingList').innerHTML = html || '<li style="text-align: center; color: #aaa; padding: 20px;">Esperando calificaciones...</li>';
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('rankingList').innerHTML = '<li style="text-align: center; color: #aaa; padding: 20px;">Error al cargar ranking</li>';
                });
        }

        setInterval(actualizarRanking, 10000);

        function mostrarProductos() {
            const html = productos.map(prod => `
                <div class="producto-card">
                    <h4>${prod.nombre}</h4>
                    <p>${prod.desc}</p>
                </div>
            `).join('');
            document.getElementById('productosGrid').innerHTML = html;
        }

        function randomizarEquipos() {
            let productosArray = [...productos];
            for (let i = productosArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [productosArray[i], productosArray[j]] = [productosArray[j], productosArray[i]];
            }

            equipos.forEach((eq, idx) => {
                eq.productoId = productosArray[idx].id;
            });

            cargarSelectEquipos();
            alert('‚úì Productos asignados aleatoriamente a cada equipo');
        }

        inicializar();
    </script>
</body>
</html>
